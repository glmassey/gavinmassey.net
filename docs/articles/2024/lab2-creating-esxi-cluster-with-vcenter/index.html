<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="Introduction and Purpose In a virtualized environment, clustering is a powerful technique that dramatically enhances resource management, availability, and scalability. An ESXi cluster, managed by vCenter, is a collection of ESXi hosts aggregated to provide a robust, shared infrastructure for virtual machines. This setup allows for:
High Availability (HA): In case of a host failure, HA automatically restarts the VMs on other hosts within the cluster, minimizing downtime and ensuring continuous availability of services.">  

  <title>
    
      Lab 2: Creating an ESXi Cluster and Integrating with vCenter
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.c5af9bae99b4a3d315b9f39305ffff27e9c3383fbbfd8b5fcaf2237667021a333a982fb958d1813a720b0a660b14022337553ae1ca93ef2ee17c4ae628ac19cb.css" integrity="sha512-xa&#43;brpm0o9MVufOTBf//J&#43;nDOD&#43;7/YtfyvIjdmcCGjM6mC&#43;5WNGBOnILCmYLFAIjN1U64cqT7y7hfErmKKwZyw==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">[Home]</a>
<a href="#" onclick="window.history.back(); return false;">[Back]</a>


<article>
    <p class="post-meta">
        <time datetime="2024-01-17 00:00:00 &#43;0000 UTC">
            2024-01-17
        </time>
    </p>

    <h1>Lab 2: Creating an ESXi Cluster and Integrating with vCenter</h1>

    

    <h2 id="introduction-and-purpose">Introduction and Purpose</h2>
<p>In a virtualized environment, clustering is a powerful technique that dramatically enhances resource management, availability, and scalability. An ESXi cluster, managed by vCenter, is a collection of ESXi hosts aggregated to provide a robust, shared infrastructure for virtual machines. This setup allows for:</p>
<ul>
<li>
<p>High Availability (HA): In case of a host failure, HA automatically restarts the VMs on other hosts within the cluster, minimizing downtime and ensuring continuous availability of services.</p>
</li>
<li>
<p>Distributed Resource Scheduler (DRS): DRS dynamically balances computing workloads across the hosts in a cluster. Based on predefined rules and current resource usage, it intelligently migrates VMs to optimize performance and resource utilization.</p>
</li>
</ul>
<p>Creating a cluster in a VMware environment, therefore, significantly enhances operational efficiency and reliability, crucial for maintaining service levels in dynamic and demanding IT environments.</p>
<h2 id="objectives">Objectives</h2>
<ol>
<li>Create a New ESXi Cluster: Consolidate ESXi hosts into a cluster for centralized management.</li>
<li>Configure Cluster Features: Enable and configure VMware DRS (Distributed Resource Scheduler) and HA (High Availability) features for resource optimization and fault tolerance.</li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Two ESXi 7 Hosts (esxi1 and esxi2) already set up.</li>
<li>vCenter Server Appliance (VCMA) 7 installed and operational.</li>
<li>All hosts are managed by vCenter.</li>
</ul>
<h2 id="steps">Steps</h2>
<h3 id="step-1-access-vcenter-server">Step 1. Access vCenter Server</h3>
<ul>
<li>Use a web browser to navigate to the vCenter Server&rsquo;s IP or DNS name.</li>
<li>Log in with your administrator credentials.</li>
</ul>
<h3 id="step-2-create-new-cluster">Step 2. Create New Cluster</h3>
<ul>
<li>In vCenter, navigate to the &ldquo;Hosts and Clusters&rdquo; view.</li>
<li>Right-click your datacenter, select “New Cluster.”</li>
<li>Name the cluster (e.g., &ldquo;ESXiCluster&rdquo;).</li>
</ul>
<h3 id="step-3-cluster-settings-configuration">Step 3. Cluster Settings Configuration</h3>
<h4 id="configuring-drs-distributed-resource-scheduler">Configuring DRS (Distributed Resource Scheduler)</h4>
<ol>
<li>Enable DRS: In your cluster settings, under “vSphere DRS,” turn it on.</li>
<li>Automation Level: Choose from Manual, Partially Automated, or Fully Automated.</li>
<li>Migration Threshold: Adjust for resource balancing aggressiveness.</li>
</ol>
<h4 id="configuring-ha-high-availability">Configuring HA (High Availability)</h4>
<ol>
<li>Enable HA: In the “vSphere Availability” section, activate HA.</li>
<li>Admission Control: Set policies for resource allocation during VM restarts.</li>
<li>VM Restart Priority: Define priority levels for restarting VMs after failure.</li>
<li>Host Isolation Response: Choose actions for VMs on isolated hosts.</li>
<li>Heartbeat Datastores: Select datastores for HA monitoring.</li>
</ol>
<p>These configurations ensure your ESXi cluster effectively balances resources with DRS and maintains high availability with HA, essential for a resilient virtual environment.</p>
<h3 id="step-4-add-esxi-hosts-to-the-cluster">Step 4. Add ESXi Hosts to the Cluster</h3>
<p>Since the ESXi hosts are already managed by the vCenter Server Appliance (VCSA) from the initial setup, the process involves moving them into the newly created cluster:</p>
<ol>
<li>
<p>Navigate to Hosts: In the vSphere Web Client, go to the “Hosts and Clusters” section.</p>
</li>
<li>
<p>Drag and Drop Hosts into Cluster:</p>
<ul>
<li>Find esxi1 and esxi2 in the inventory.</li>
<li>Drag each host and drop it into the cluster you created.</li>
<li>Confirm any prompts that appear regarding the move.</li>
</ul>
</li>
</ol>
<p>This method efficiently reallocates existing hosts into the new cluster without needing to re-enter host details.</p>
<h2 id="post-lab-verification">Post-Lab Verification</h2>
<ul>
<li>Ensure that both ESXi hosts are visible and active within the cluster.</li>
<li>Check that DRS and HA statuses are green and operational.</li>
<li>Optionally, create and run a few test VMs to observe DRS in action.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This lab will result in a functional ESXi cluster managed by vCenter, with DRS and HA capabilities. It’s a foundational step towards a more resilient and efficient virtual environment.</p>

</article>


            </div>
        </main>
    </body></html>
